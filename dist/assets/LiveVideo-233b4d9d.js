import{r as l,j as e}from"./react-472d7f6d.js";import{B as a,n as m,o as u,p as n}from"./@mui-74370819.js";import"./hoist-non-react-statics-d052b204.js";import"./clsx-5a9f8d06.js";import"./react-transition-group-ffe54232.js";import"./@babel-591e0485.js";import"./react-dom-4df14f11.js";import"./scheduler-765c72db.js";import"./@emotion-94b9ecb4.js";import"./stylis-79144faa.js";const y=()=>{const[s,c]=l.useState(null),[r,d]=l.useState(null),x=!!s,f=o=>{c(o.currentTarget)},t=()=>{c(null)},i=async()=>{try{const o=await fetch("/next-video",{cache:"no-store"});if(o.ok){const h=await o.blob(),p=URL.createObjectURL(h);r&&URL.revokeObjectURL(r),d(p)}else console.error("Error fetching video:",o.statusText)}catch(o){console.error("Error fetching live video:",o)}};return l.useEffect(()=>{i();const o=setInterval(i,1e4);return()=>{clearInterval(o),r&&URL.revokeObjectURL(r)}},[r]),e.jsxs("div",{className:"bg-white min-h-screen flex flex-col items-center justify-center px-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-6",children:"Live Video"}),e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 w-7/10",children:r?e.jsx("video",{src:r,controls:!0,autoPlay:!0,muted:!0,style:{width:"100%",height:"90%",objectFit:"cover"}}):e.jsx("div",{className:"text-center text-lg font-semibold flex justify-center items-center h-full",children:"Loading live video..."})}),e.jsxs("div",{className:"flex flex-col gap-52 w-3/10 p-4 text-center",children:[e.jsx(a,{variant:"contained",onClick:f,endIcon:e.jsx(m,{}),sx:{width:"100%",backgroundColor:"#1976d2",color:"#ffffff",fontWeight:"bold","&:hover":{backgroundColor:"#1565c0"},textTransform:"none",padding:"10px 10PX",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",marginBottom:"16px"},children:"All Cameras"}),e.jsxs(u,{anchorEl:s,open:x,onClose:t,PaperProps:{style:{backgroundColor:"#f0f0f0",color:"#333",minWidth:"150px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)"}},children:[e.jsx(n,{onClick:t,children:"Camera 1"}),e.jsx(n,{onClick:t,children:"Camera 2"}),e.jsx(n,{onClick:t,children:"Camera 3"}),e.jsx(n,{onClick:t,children:"Camera 4"})]}),e.jsx(a,{variant:"contained",sx:{width:"100%",backgroundColor:"#388e3c",color:"#ffffff",fontWeight:"bold","&:hover":{backgroundColor:"#2e7d32"},textTransform:"none",padding:"10px 0",borderRadius:"8px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)"},children:"Take Snapshot"})]})]})]})};export{y as default};
